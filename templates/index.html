<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Amcho Pasro</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='home.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
  </head>
  <body>
    {% set home_stores = stores|default([], true) %}
    <nav class="navbar">
      <div class="navbar-container">
        <div class="navbar-brand">
          <a href="#" class="brand-link">Amcho Pasro</a>
        </div>

        <ul class="navbar-menu">
          <li class="navbar-item">
            <a href="{{ url_for('index') }}" class="navbar-link active">Home</a>
          </li>
          {% if current_user.is_authenticated %}
          <li class="navbar-item">
            <a href="{{ url_for('products') }}" class="navbar-link">Products</a>
          </li>
          <li class="navbar-item">
            <a href="{{ url_for('store_finder') }}" class="navbar-link"
              >Find Stores</a
            >
          </li>
          {% if current_user.is_seller() %}
          <li class="navbar-item">
            <a href="{{ url_for('post_product') }}" class="navbar-link"
              >Post Product</a
            >
            <li class="navbar-item">
              <a href="{{ url_for('my_store') }}" class="navbar-link">My Store</a>
            </li>
          </li>
          {% endif %}
          <li class="navbar-item">
            <a href="{{ url_for('logout') }}" class="navbar-link">Logout</a>
          </li>
          {% else %}
          <li class="navbar-item">
            <a href="{{ url_for('login') }}" class="navbar-link">Login</a>
          </li>
          <li class="navbar-item">
            <a href="{{ url_for('signup') }}" class="navbar-link">Sign Up</a>
          </li>
          <li class="navbar-item">
            <a href="{{ url_for('seller_signup') }}" class="navbar-link"
              >Join as Seller</a
            >
          </li>
          {% endif %}
        </ul>

        <div class="mobile-menu-toggle" id="mobile-menu-toggle">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
      </div>
    </nav>

    <div class="mobile-sidebar" id="mobile-sidebar">
      <div class="sidebar-header">
        <div class="sidebar-brand">Amcho Pasro</div>
        <button class="sidebar-close" id="sidebar-close">&times;</button>
      </div>
      <ul class="sidebar-menu">
        <li class="sidebar-item">
          <a href="{{ url_for('index') }}" class="sidebar-link active">Home</a>
        </li>
        <li class="sidebar-item">
          <a href="{{ url_for('products') }}" class="sidebar-link">Products</a>
        </li>
        <li class="sidebar-item">
          <a href="{{ url_for('store_finder') }}" class="sidebar-link"
            >Find Stores</a
          >
        </li>
        {% if current_user.is_authenticated %} {% if current_user.is_seller() %}
        <li class="sidebar-item">
          <a href="{{ url_for('post_product') }}" class="sidebar-link"
            >Post Product</a
          >
          <li class="sidebar-item">
            <a href="{{ url_for('my_store') }}" class="sidebar-link">My Store</a>
          </li>
        </li>
        {% endif %}
        <li class="sidebar-item">
          <a href="{{ url_for('logout') }}" class="sidebar-link">Logout</a>
        </li>
        {% else %}
        <li class="sidebar-item">
          <a href="{{ url_for('login') }}" class="sidebar-link">Login</a>
        </li>
        <li class="sidebar-item">
          <a href="{{ url_for('signup') }}" class="sidebar-link">Sign Up</a>
        </li>
        <li class="sidebar-item">
          <a href="{{ url_for('seller_signup') }}" class="sidebar-link"
            >Join as Seller</a
          >
        </li>
        {% endif %}
      </ul>
    </div>

    <!-- Overlay for mobile sidebar -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <main class="landing-main">
      <section class="hero hero--landing">
        <div class="hero__layer"></div>
        <div class="container hero__container">
          <div class="hero__copy">
            <h1>Explore coastal craft and daily catches in real time</h1>
            <p>
              Meet the makers, growers, and fishers shaping Goa’s daily rhythm.
              Finding what you need anywhere in goa is as simple as scrolling on a map.
            </p>
            <div class="hero__metrics" aria-label="Marketplace stats">
              <div class="metric-card">
                <span class="metric-card__value">150+</span>
                <span class="metric-card__label">Active sellers</span>
              </div>
              <div class="metric-card">
                <span class="metric-card__value">12</span>
                <span class="metric-card__label">Local markets</span>
              </div>
              <div class="metric-card">
                <span class="metric-card__value">1000+</span>
                <span class="metric-card__label">Active users</span>
              </div>
            </div>
            <div class="hero__actions">
              <a href="{{ url_for('products') }}" class="cta-button primary"
                >Browse the marketplace</a
              >
              {% if current_user.is_authenticated and current_user.is_seller() %}
              <a href="{{ url_for('post_product') }}" class="cta-button ghost"
                >Share a new product</a
              >
              {% else %}
              <a href="{{ url_for('seller_signup') }}" class="cta-button ghost"
                >List your store</a
              >
              {% endif %}
            </div>
          </div>
          <div class="hero__media">
            <div class="hero-stack">
              <div class="hero-stack__item">
                <i class="fa-solid fa-seedling"></i>
                <span>Organic farms from Salcete</span>
              </div>
              <div class="hero-stack__item">
                <i class="fa-solid fa-mortar-pestle"></i>
                <span>Local spice roasters</span>
              </div>
              <div class="hero-stack__item">
                <i class="fa-solid fa-fish"></i>
                <span>Day-boat seafood updates</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="goa-map-section" aria-label="Stores across Goa">
        <div class="container goa-map__grid">
          <div class="goa-map__copy">
            <h2>Every verified store in one glance</h2>
            {% if not home_stores %}
            <p class="goa-map__empty-note">
              Map will light up as soon as sellers add their location pin.
            </p>
            {% endif %}
          </div>
          <div class="goa-map__canvas-wrap">
            <div
              id="home-stores-map"
              class="goa-map__canvas"
              role="img"
              aria-label="Interactive map of Goa with store markers"
              data-stores='{{ home_stores|tojson|safe }}'
              tabindex="0"
            ></div>
            <div class="goa-map__hint">
              Drag to move around Goa or use your mouse wheel to zoom. Click a marker to open the store profile.
            </div>
          </div>
        </div>
      </section>

      <section class="flow-section" aria-labelledby="how-it-works-heading">
        <div class="container">
          <h2 id="how-it-works-heading">How it comes together</h2>
          <div class="flow-grid">
            <div class="flow-column">
              <h3>
                <span class="flow-icon"><i class="fa-solid fa-user"></i></span>
                For buyers
              </h3>
              <ol class="flow-steps">
                <li>
                  Discover stores nearby or across Goa using the marketplace or
                  map view.
                </li>
                <li>
                  Check the latest product notes, photos, and pricing shared by
                  each seller.
                </li>
                <li>
                  Reach out through the built-in contact options to coordinate
                  pickup, delivery, or hold requests on your terms.
                </li>
              </ol>
            </div>
            <div class="flow-column">
              <h3>
                <span class="flow-icon"><i class="fa-solid fa-store"></i></span>
                For sellers
              </h3>
              <ol class="flow-steps">
                <li>
                  Create a store profile with your location, opening schedule,
                  and a short introduction.
                </li>
                <li>
                  Post products with photos, quantities, and contact
                  preferences—update them anytime.
                </li>
                <li>
                  Chat with interested buyers directly and arrange exchange
                  details that fit your routine.
                </li>
              </ol>
            </div>
          </div>
        </div>
      </section>

      <section class="experience-panels" aria-label="Marketplace snapshot">
        <div class="container experience-panels__container">
          <article class="experience-card">
            <div class="experience-card__icon">
              <i class="fa-solid fa-map-location-dot"></i>
            </div>
            <div>
              <h3>Map-first discovery</h3>
              <p>
                Drop into the map to see who’s nearby, view routes, and bookmark
                favorite sellers for later.
              </p>
            </div>
          </article>
                    <article class="experience-card">
            <div class="experience-card__icon">
              <i class="fa-solid fa-comments"></i>
            </div>
            <div>
              <h3>Threaded conversations</h3>
              <p>
                Reddit-style threaded conversations on product posts and
                store pages so buyers and sellers can swap notes in one place.
              </p>
            </div>
          </article>
          <article class="experience-card">
            <div class="experience-card__icon">
              <i class="fa-solid fa-store"></i>
            </div>
            <div>
              <h3>Storefront pages</h3>
              <p>
                Each seller page highlights photos, pickup details, and ways to
                reach them so you can confirm availability before you head out.
              </p>
            </div>
          </article>

        </div>
      </section>

      <section class="cta-panel">
        <div class="container cta-panel__container">
          <div class="cta-panel__copy">
            <h2>Ready to share your market table?</h2>
            <p>
              Set up a profile, add photos, and keep your community updated in a
              few easy steps. Whether you’re a fisherfolk collective or a weekend
              baker, Amcho Pasro gives you a friendly space to be discovered.
            </p>
          </div>
          <div class="cta-panel__actions">
            <a href="{{ url_for('seller_signup') }}" class="cta-button primary"
              >Create a seller account</a
            >
            <a href="{{ url_for('signup') }}" class="cta-button ghost"
              >Join as a buyer</a
            >
            <p>
              Already part of the community?
              <a href="{{ url_for('login') }}" class="text-link-inverse"
                >Sign in</a
              >
            </p>
          </div>
        </div>
      </section>

      <footer class="footer">
        <div class="container footer-container">
          <div class="footer-brand">Amcho Pasro</div>
          <div class="footer-copy">
            &copy; {{ current_year }} Amcho Pasro. All rights reserved.
          </div>
        </div>
      </footer>
    </main>

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
      defer
    ></script>
    <script src="{{ url_for('static', filename='home-map.js') }}" defer></script>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
  </body>
</html>
